<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-bold text-gray-900">Workflows</h1>
  <%= render "ui/button", label: "New Workflow", href: new_workflow_path %>
</div>

<% if @workflows.any? %>
  <%= render layout: "ui/card" do %>
    <div class="-mx-6 -my-4">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">State</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Links</th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"></th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @workflows.each do |workflow| %>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900"><%= workflow.name %></div>
                <div class="text-sm text-gray-500"><%= pluralize(workflow.workflow_steps.size, "step") %></div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <%= render "ui/badge", label: workflow.state.capitalize, color: workflow.active? ? :green : :gray %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <%= workflow.schedule_links.count %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm">
                <%= link_to "View", workflow_path(workflow), class: "text-gray-600 hover:text-gray-900 font-medium" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
<% else %>
  <%= render "ui/empty_state",
    title: "No workflows yet",
    description: "Create a workflow to automate email sequences for your bookings.",
    action_label: "New Workflow",
    action_path: new_workflow_path %>
<% end %>
